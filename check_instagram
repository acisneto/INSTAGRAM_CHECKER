import urllib.request
import urllib.error
from win10toast import ToastNotifier

usernames = [
    "intagram",
    "ADD_USERNAMES_HERE"
]

toaster = ToastNotifier()

def check_username(username):
    url = f"https://www.instagram.com/{username}/"

    try:
        urllib.request.urlopen(url)
        return "OCUPADO"
    except urllib.error.HTTPError as e:
        if e.code == 404:
            return "DISPONÍVEL"
        else:
            return f"STATUS {e.code}"

resultados = []

for user in usernames:
    status = check_username(user)
    texto = f"@{user}: {status}"
    print(texto)
    resultados.append(texto)

mensagem = "\n".join(resultados)

toaster.show_toast(
    "Verificação de usuários Instagram",
    mensagem,
    duration=10
)
